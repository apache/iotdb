<?xml version="1.0" encoding="UTF-8"?>
<!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <parent>
        <artifactId>iotdb-parent</artifactId>
        <groupId>org.apache.iotdb</groupId>
        <version>0.12.2-SNAPSHOT</version>
        <relativePath>../pom.xml</relativePath>
    </parent>
    <modelVersion>4.0.0</modelVersion>
    <artifactId>iotdb-website</artifactId>
    <properties>
        <frontend-maven-plugin.version>1.9.1</frontend-maven-plugin.version>
    </properties>
    <distributionManagement>
        <site>
            <id>apache.website</id>
            <url>scm:git:https://gitbox.apache.org/repos/asf/iotdb-website.git</url>
        </site>
    </distributionManagement>
    <profiles>
        <!--
        Process:
        1. download existing static website from github
        2. copy and unpack it to a tmp folder
        3. if site-compile-0.x is enabled, download files of 0.x from github,
        (except the master branch). copy it to the source tmp folder
        4. compiling...
        5. if site-compile-0.x is disabled, copy existing static files from the tmp folder to the
        target folder.
        6. upload to github website
        -->
        <profile>
            <id>download-site</id>
            <build>
                <plugins>
                    <!-- download existing website from iotdb repo -->
                    <plugin>
                        <groupId>com.googlecode.maven-download-plugin</groupId>
                        <artifactId>download-maven-plugin</artifactId>
                        <version>1.3.0</version>
                        <executions>
                            <execution>
                                <id>get-existing-site</id>
                                <phase>generate-sources</phase>
                                <goals>
                                    <goal>wget</goal>
                                </goals>
                                <configuration>
                                    <url>https://github.com/apache/iotdb-website/archive/asf-site.zip</url>
                                    <outputDirectory>${project.build.directory}/download</outputDirectory>
                                    <outputFileName>website.zip</outputFileName>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <!-- unpack existing website from the zip files-->
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>truezip-maven-plugin</artifactId>
                        <version>1.2</version>
                        <inherited>false</inherited>
                        <executions>
                            <execution>
                                <id>unpack-existing-docs</id>
                                <goals>
                                    <goal>copy</goal>
                                </goals>
                                <phase>compile</phase>
                                <configuration>
                                    <fileset>
                                        <directory>${project.build.directory}/download/website.zip/iotdb-website-asf-site/UserGuide</directory>
                                        <outputDirectory>${project.build.directory}/existing/UserGuide</outputDirectory>
                                    </fileset>
                                </configuration>
                            </execution>
                            <execution>
                                <id>unpack-existing-zh-docs</id>
                                <goals>
                                    <goal>copy</goal>
                                </goals>
                                <phase>compile</phase>
                                <configuration>
                                    <fileset>
                                        <directory>${project.build.directory}/download/website.zip/iotdb-website-asf-site/zh/UserGuide</directory>
                                        <outputDirectory>${project.build.directory}/existing/zh/UserGuide</outputDirectory>
                                    </fileset>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <!-- Copy existing documents-->
                    <plugin>
                        <artifactId>maven-resources-plugin</artifactId>
                        <executions>
                            <!-- copy source codes into vue required folders-->
                            <execution>
                                <id>copy-existing-docs-to-dist</id>
                                <!-- here the phase you need -->
                                <phase>package</phase>
                                <goals>
                                    <goal>copy-resources</goal>
                                </goals>
                                <configuration>
                                    <outputDirectory>${project.build.directory}/vue-source/src/.vuepress/dist/UserGuide</outputDirectory>
                                    <!-- output directory -->
                                    <resources>
                                        <resource>
                                            <directory>${project.build.directory}/existing/UserGuide/</directory>
                                            <filtering>true</filtering>
                                        </resource>
                                    </resources>
                                </configuration>
                            </execution>
                            <execution>
                                <id>copy-existing-zh-docs-to-dist</id>
                                <!-- here the phase you need -->
                                <phase>package</phase>
                                <goals>
                                    <goal>copy-resources</goal>
                                </goals>
                                <configuration>
                                    <outputDirectory>${project.build.directory}/vue-source/src/.vuepress/dist/zh/UserGuide</outputDirectory>
                                    <!-- output directory -->
                                    <resources>
                                        <resource>
                                            <directory>${project.build.directory}/existing/zh/UserGuide/</directory>
                                            <filtering>true</filtering>
                                        </resource>
                                    </resources>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <!-- by default, only the master branch is compiled and uploaded.
            Use -Dsite.download.existing.htmls=true to contain all other htmls (v0.8,v0.9 etc..)
            -->
            <id>compile-site</id>
            <build>
                <plugins>
                    <!-- Copy master documents-->
                    <plugin>
                        <artifactId>maven-resources-plugin</artifactId>
                        <executions>
                            <!-- copy source codes into vue required folders-->
                            <execution>
                                <id>copy-source-code-to-vue-source-folder</id>
                                <!-- here the phase you need -->
                                <phase>generate-sources</phase>
                                <goals>
                                    <goal>copy-resources</goal>
                                </goals>
                                <configuration>
                                    <outputDirectory>${project.build.directory}/vue-source/src</outputDirectory>
                                    <!-- output directory -->
                                    <resources>
                                        <resource>
                                            <directory>${basedir}/src/main/</directory>
                                            <filtering>true</filtering>
                                        </resource>
                                    </resources>
                                </configuration>
                            </execution>
                            <execution>
                                <id>copy-master-docs-to-vue-source-folder</id>
                                <!-- here the phase you need -->
                                <phase>generate-sources</phase>
                                <goals>
                                    <goal>copy-resources</goal>
                                </goals>
                                <configuration>
                                    <outputDirectory>${project.build.directory}/vue-source/src</outputDirectory>
                                    <!-- output directory -->
                                    <resources>
                                        <resource>
                                            <directory>${basedir}/../docs</directory>
                                            <excludes>
                                                <exclude>UserGuide/**/*</exclude>
                                                <exclude>zh/UserGuide/**/*</exclude>
                                            </excludes>
                                        </resource>
                                    </resources>
                                </configuration>
                            </execution>
                            <execution>
                                <id>copy-master-userguide-docs-to-vue-source-folder</id>
                                <!-- here the phase you need -->
                                <phase>generate-sources</phase>
                                <goals>
                                    <goal>copy-resources</goal>
                                </goals>
                                <configuration>
                                    <outputDirectory>${project.build.directory}/vue-source/src/UserGuide/Master</outputDirectory>
                                    <!-- output directory -->
                                    <resources>
                                        <resource>
                                            <directory>${basedir}/../docs/UserGuide</directory>
                                            <filtering>true</filtering>
                                        </resource>
                                    </resources>
                                </configuration>
                            </execution>
                            <execution>
                                <id>copy-master-zh-userguide-docs-to-vue-source-folder</id>
                                <!-- here the phase you need -->
                                <phase>generate-sources</phase>
                                <goals>
                                    <goal>copy-resources</goal>
                                </goals>
                                <configuration>
                                    <outputDirectory>${project.build.directory}/vue-source/src/zh/UserGuide/Master</outputDirectory>
                                    <!-- output directory -->
                                    <resources>
                                        <resource>
                                            <directory>${basedir}/../docs/zh/UserGuide</directory>
                                            <filtering>true</filtering>
                                        </resource>
                                    </resources>
                                </configuration>
                            </execution>
                            <execution>
                                <id>copy-other-md-files-to-development</id>
                                <!-- here the phase you need -->
                                <phase>generate-sources</phase>
                                <goals>
                                    <goal>copy-resources</goal>
                                </goals>
                                <configuration>
                                    <outputDirectory>${project.build.directory}/vue-source/src/Development</outputDirectory>
                                    <!-- output directory -->
                                    <resources>
                                        <resource>
                                            <directory>${basedir}/../tsfile</directory>
                                            <includes>
                                                <include>format-changelist.md</include>
                                            </includes>
                                        </resource>
                                        <resource>
                                            <directory>${basedir}/../thrift</directory>
                                            <includes>
                                                <include>rpc-changelist.md</include>
                                            </includes>
                                        </resource>
                                    </resources>
                                </configuration>
                            </execution>
                            <execution>
                                <id>copy-other-md-files-to-zh-development</id>
                                <!-- here the phase you need -->
                                <phase>generate-sources</phase>
                                <goals>
                                    <goal>copy-resources</goal>
                                </goals>
                                <configuration>
                                    <outputDirectory>${project.build.directory}/vue-source/src/zh/Development</outputDirectory>
                                    <!-- output directory -->
                                    <resources>
                                        <resource>
                                            <directory>${basedir}/../tsfile</directory>
                                            <includes>
                                                <include>format-changelist.md</include>
                                            </includes>
                                        </resource>
                                        <resource>
                                            <directory>${basedir}/../thrift</directory>
                                            <includes>
                                                <include>rpc-changelist.md</include>
                                            </includes>
                                        </resource>
                                    </resources>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <!-- copy single files, and move UserGuide of master into tmp folder -->
                    <plugin>
                        <groupId>com.coderplus.maven.plugins</groupId>
                        <artifactId>copy-rename-maven-plugin</artifactId>
                        <version>1.0</version>
                        <executions>
                            <execution>
                                <id>copy-package-json</id>
                                <phase>generate-sources</phase>
                                <goals>
                                    <goal>copy</goal>
                                </goals>
                                <configuration>
                                    <fileSets>
                                        <fileSet>
                                            <sourceFile>${basedir}/src/main/package.json</sourceFile>
                                            <destinationFile>${project.build.directory}/vue-source/package.json</destinationFile>
                                        </fileSet>
                                        <fileSet>
                                            <sourceFile>${basedir}/src/main/deploy.js</sourceFile>
                                            <destinationFile>${project.build.directory}/vue-source/deploy.js</destinationFile>
                                        </fileSet>
                                    </fileSets>
                                </configuration>
                            </execution>
                            <!-- remove files if `existing` folder exist-->
                            <execution>
                                <id>clean-stale-master-doc</id>
                                <phase>compile</phase>
                                <goals>
                                    <goal>rename</goal>
                                </goals>
                                <configuration>
                                    <sourceFile>${project.build.directory}/existing/UserGuide/Master</sourceFile>
                                    <destinationFile>${project.build.directory}/existing/Master</destinationFile>
                                </configuration>
                            </execution>
                            <execution>
                                <id>clean-stale-master-zh-doc</id>
                                <phase>compile</phase>
                                <goals>
                                    <goal>rename</goal>
                                </goals>
                                <configuration>
                                    <sourceFile>${project.build.directory}/existing/zh/UserGuide/Master</sourceFile>
                                    <destinationFile>${project.build.directory}/existing/zh/Master</destinationFile>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <!--install node and npm， then run `npm install` and `npm run build`-->
                    <plugin>
                        <groupId>com.github.eirslett</groupId>
                        <artifactId>frontend-maven-plugin</artifactId>
                        <version>1.9.1</version>
                        <configuration>
                            <installDirectory>${project.build.directory}/tools</installDirectory>
                            <workingDirectory>${project.build.directory}/vue-source</workingDirectory>
                        </configuration>
                        <executions>
                            <execution>
                                <id>install-node-and-npm</id>
                                <goals>
                                    <goal>install-node-and-npm</goal>
                                </goals>
                                <phase>compile</phase>
                                <configuration>
                                    <nodeVersion>v12.16.2</nodeVersion>
                                    <npmVersion>6.14.4</npmVersion>
                                </configuration>
                            </execution>
                            <!-- Install all project dependencies -->
                            <execution>
                                <id>npm install</id>
                                <goals>
                                    <goal>npm</goal>
                                </goals>
                                <phase>compile</phase>
                                <!-- Optional configuration which provides for running any npm command -->
                                <configuration>
                                    <arguments>install</arguments>
                                </configuration>
                            </execution>
                            <!-- Build and minify static files -->
                            <execution>
                                <id>npm run build</id>
                                <phase>compile</phase>
                                <goals>
                                    <goal>npm</goal>
                                </goals>
                                <configuration>
                                    <arguments>run build</arguments>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-scm-publish-plugin</artifactId>
                        <configuration>
                            <!-- mono-module doesn't require site:stage -->
                            <content>${project.build.directory}/vue-source/src/.vuepress/dist</content>
                            <!-- branch where to deploy -->
                            <scmBranch>asf-site</scmBranch>
                        </configuration>
                    </plugin>
                    <!--<plugin>
                        <groupId>org.simplify4u.plugins</groupId>
                        <artifactId>sitemapxml-maven-plugin</artifactId>
                        <version>2.0.0</version>
                        <configuration>
                            <siteOutputDirectory>${project.build.directory}/vue-source/src/.vuepress/dist</siteOutputDirectory>
                            <maxDepth>5</maxDepth>
                        </configuration>
                        <executions>
                            <execution>
                                <phase>compile</phase>
                                <goals>
                                    <goal>gen</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>-->
                </plugins>
            </build>
        </profile>
        <profile>
            <id>compile-site-0.12</id>
            <build>
                <plugins>
                    <!-- download 0.12 docs from iotdb repo -->
                    <plugin>
                        <groupId>com.googlecode.maven-download-plugin</groupId>
                        <artifactId>download-maven-plugin</artifactId>
                        <version>1.3.0</version>
                        <executions>
                            <execution>
                                <id>get-0.12-docs</id>
                                <phase>generate-sources</phase>
                                <goals>
                                    <goal>wget</goal>
                                </goals>
                                <configuration>
                                    <url>https://github.com/apache/iotdb/archive/rel/0.12.zip</url>
                                    <outputDirectory>${project.build.directory}/download</outputDirectory>
                                    <outputFileName>0.12.x.zip</outputFileName>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <!-- unpack 0.12 docs from the zip files-->
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>truezip-maven-plugin</artifactId>
                        <version>1.2</version>
                        <inherited>false</inherited>
                        <executions>
                            <execution>
                                <id>copy-0.12-documentation</id>
                                <goals>
                                    <goal>copy</goal>
                                </goals>
                                <phase>generate-sources</phase>
                                <configuration>
                                    <fileset>
                                        <directory>${project.build.directory}/download/0.12.x.zip/iotdb-rel-0.12/docs/UserGuide</directory>
                                        <outputDirectory>${project.build.directory}/vue-source/src/UserGuide/V0.12.x</outputDirectory>
                                    </fileset>
                                </configuration>
                            </execution>
                            <execution>
                                <id>copy-0.12-zh-documentation</id>
                                <goals>
                                    <goal>copy</goal>
                                </goals>
                                <phase>generate-sources</phase>
                                <configuration>
                                    <fileset>
                                        <directory>${project.build.directory}/download/0.12.x.zip/iotdb-rel-0.12/docs/zh/UserGuide</directory>
                                        <outputDirectory>${project.build.directory}/vue-source/src/zh/UserGuide/V0.12.x</outputDirectory>
                                    </fileset>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <!-- remove files if `existing` folder exist-->
                    <plugin>
                        <groupId>com.coderplus.maven.plugins</groupId>
                        <artifactId>copy-rename-maven-plugin</artifactId>
                        <version>1.0</version>
                        <executions>
                            <execution>
                                <id>clean-stale-0.12-doc</id>
                                <phase>compile</phase>
                                <goals>
                                    <goal>rename</goal>
                                </goals>
                                <configuration>
                                    <sourceFile>${project.build.directory}/existing/UserGuide/V0.12.x</sourceFile>
                                    <destinationFile>${project.build.directory}/existing/V0.12.x</destinationFile>
                                </configuration>
                            </execution>
                            <execution>
                                <id>clean-stale-0.12-zh-doc</id>
                                <phase>compile</phase>
                                <goals>
                                    <goal>rename</goal>
                                </goals>
                                <configuration>
                                    <sourceFile>${project.build.directory}/existing/zh/UserGuide/V0.12.x</sourceFile>
                                    <destinationFile>${project.build.directory}/existing/zh/V0.12.x</destinationFile>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>compile-site-0.11</id>
            <build>
                <plugins>
                    <!-- download 0.11 docs from iotdb repo -->
                    <plugin>
                        <groupId>com.googlecode.maven-download-plugin</groupId>
                        <artifactId>download-maven-plugin</artifactId>
                        <version>1.3.0</version>
                        <executions>
                            <execution>
                                <id>get-0.11-docs</id>
                                <phase>generate-sources</phase>
                                <goals>
                                    <goal>wget</goal>
                                </goals>
                                <configuration>
                                    <url>https://github.com/apache/iotdb/archive/rel/0.11.zip</url>
                                    <outputDirectory>${project.build.directory}/download</outputDirectory>
                                    <outputFileName>0.11.x.zip</outputFileName>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <!-- unpack 0.11 docs from the zip files-->
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>truezip-maven-plugin</artifactId>
                        <version>1.2</version>
                        <inherited>false</inherited>
                        <executions>
                            <execution>
                                <id>copy-0.11-documentation</id>
                                <goals>
                                    <goal>copy</goal>
                                </goals>
                                <phase>generate-sources</phase>
                                <configuration>
                                    <fileset>
                                        <directory>${project.build.directory}/download/0.11.x.zip/iotdb-rel-0.11/docs/UserGuide</directory>
                                        <outputDirectory>${project.build.directory}/vue-source/src/UserGuide/V0.11.x</outputDirectory>
                                    </fileset>
                                </configuration>
                            </execution>
                            <execution>
                                <id>copy-0.11-zh-documentation</id>
                                <goals>
                                    <goal>copy</goal>
                                </goals>
                                <phase>generate-sources</phase>
                                <configuration>
                                    <fileset>
                                        <directory>${project.build.directory}/download/0.11.x.zip/iotdb-rel-0.11/docs/zh/UserGuide</directory>
                                        <outputDirectory>${project.build.directory}/vue-source/src/zh/UserGuide/V0.11.x</outputDirectory>
                                    </fileset>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <!-- remove files if `existing` folder exist-->
                    <plugin>
                        <groupId>com.coderplus.maven.plugins</groupId>
                        <artifactId>copy-rename-maven-plugin</artifactId>
                        <version>1.0</version>
                        <executions>
                            <execution>
                                <id>clean-stale-0.11-doc</id>
                                <phase>compile</phase>
                                <goals>
                                    <goal>rename</goal>
                                </goals>
                                <configuration>
                                    <sourceFile>${project.build.directory}/existing/UserGuide/V0.11.x</sourceFile>
                                    <destinationFile>${project.build.directory}/existing/V0.11.x</destinationFile>
                                </configuration>
                            </execution>
                            <execution>
                                <id>clean-stale-0.11-zh-doc</id>
                                <phase>compile</phase>
                                <goals>
                                    <goal>rename</goal>
                                </goals>
                                <configuration>
                                    <sourceFile>${project.build.directory}/existing/zh/UserGuide/V0.11.x</sourceFile>
                                    <destinationFile>${project.build.directory}/existing/zh/V0.11.x</destinationFile>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>compile-site-0.10</id>
            <build>
                <plugins>
                    <!-- download 0.10 docs from iotdb repo -->
                    <plugin>
                        <groupId>com.googlecode.maven-download-plugin</groupId>
                        <artifactId>download-maven-plugin</artifactId>
                        <version>1.3.0</version>
                        <executions>
                            <execution>
                                <id>get-0.10-docs</id>
                                <phase>generate-sources</phase>
                                <goals>
                                    <goal>wget</goal>
                                </goals>
                                <configuration>
                                    <url>https://github.com/apache/iotdb/archive/rel/0.10.zip</url>
                                    <outputDirectory>${project.build.directory}/download</outputDirectory>
                                    <outputFileName>0.10.x.zip</outputFileName>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <!-- unpack 0.11 docs from the zip files-->
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>truezip-maven-plugin</artifactId>
                        <version>1.2</version>
                        <inherited>false</inherited>
                        <executions>
                            <execution>
                                <id>copy-0.10-documentation</id>
                                <goals>
                                    <goal>copy</goal>
                                </goals>
                                <phase>generate-sources</phase>
                                <configuration>
                                    <fileset>
                                        <directory>${project.build.directory}/download/0.10.x.zip/iotdb-rel-0.10/docs/UserGuide</directory>
                                        <outputDirectory>${project.build.directory}/vue-source/src/UserGuide/V0.10.x</outputDirectory>
                                    </fileset>
                                </configuration>
                            </execution>
                            <execution>
                                <id>copy-0.10-zh-documentation</id>
                                <goals>
                                    <goal>copy</goal>
                                </goals>
                                <phase>generate-sources</phase>
                                <configuration>
                                    <fileset>
                                        <directory>${project.build.directory}/download/0.10.x.zip/iotdb-rel-0.10/docs/zh/UserGuide</directory>
                                        <outputDirectory>${project.build.directory}/vue-source/src/zh/UserGuide/V0.10.x</outputDirectory>
                                    </fileset>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <!-- remove files if `existing` folder exist-->
                    <plugin>
                        <groupId>com.coderplus.maven.plugins</groupId>
                        <artifactId>copy-rename-maven-plugin</artifactId>
                        <version>1.0</version>
                        <executions>
                            <execution>
                                <id>clean-stale-0.10-doc</id>
                                <phase>compile</phase>
                                <goals>
                                    <goal>rename</goal>
                                </goals>
                                <configuration>
                                    <sourceFile>${project.build.directory}/existing/UserGuide/V0.10.x</sourceFile>
                                    <destinationFile>${project.build.directory}/existing/V0.10.x</destinationFile>
                                </configuration>
                            </execution>
                            <execution>
                                <id>clean-stale-0.10-zh-doc</id>
                                <phase>compile</phase>
                                <goals>
                                    <goal>rename</goal>
                                </goals>
                                <configuration>
                                    <sourceFile>${project.build.directory}/existing/zh/UserGuide/V0.10.x</sourceFile>
                                    <destinationFile>${project.build.directory}/existing/zh/V0.10.x</destinationFile>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>compile-site-0.9</id>
            <build>
                <plugins>
                    <!-- download 0.9 docs from iotdb repo -->
                    <plugin>
                        <groupId>com.googlecode.maven-download-plugin</groupId>
                        <artifactId>download-maven-plugin</artifactId>
                        <version>1.3.0</version>
                        <executions>
                            <execution>
                                <id>get-0.9-docs</id>
                                <phase>generate-sources</phase>
                                <goals>
                                    <goal>wget</goal>
                                </goals>
                                <configuration>
                                    <url>https://github.com/apache/iotdb/archive/rel/0.9.zip</url>
                                    <outputDirectory>${project.build.directory}/download</outputDirectory>
                                    <outputFileName>0.9.x.zip</outputFileName>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <!-- unpack 0.9 docs from the zip files-->
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>truezip-maven-plugin</artifactId>
                        <version>1.2</version>
                        <inherited>false</inherited>
                        <executions>
                            <execution>
                                <id>copy-0.9-documentation</id>
                                <goals>
                                    <goal>copy</goal>
                                </goals>
                                <phase>generate-sources</phase>
                                <configuration>
                                    <fileset>
                                        <directory>${project.build.directory}/download/0.9.x.zip/iotdb-rel-0.9/docs/UserGuide</directory>
                                        <outputDirectory>${project.build.directory}/vue-source/src/UserGuide/V0.9.x</outputDirectory>
                                    </fileset>
                                </configuration>
                            </execution>
                            <execution>
                                <id>copy-0.9-zh-documentation</id>
                                <goals>
                                    <goal>copy</goal>
                                </goals>
                                <phase>generate-sources</phase>
                                <configuration>
                                    <fileset>
                                        <directory>${project.build.directory}/download/0.9.x.zip/iotdb-rel-0.9/docs/zh/UserGuide</directory>
                                        <outputDirectory>${project.build.directory}/vue-source/src/zh/UserGuide/V0.9.x</outputDirectory>
                                    </fileset>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <!-- remove files if `existing` folder exist-->
                    <plugin>
                        <groupId>com.coderplus.maven.plugins</groupId>
                        <artifactId>copy-rename-maven-plugin</artifactId>
                        <version>1.0</version>
                        <executions>
                            <execution>
                                <id>clean-stale-0.9-doc</id>
                                <phase>compile</phase>
                                <goals>
                                    <goal>rename</goal>
                                </goals>
                                <configuration>
                                    <sourceFile>${project.build.directory}/existing/UserGuide/V0.9.x</sourceFile>
                                    <destinationFile>${project.build.directory}/existing/V0.9.x</destinationFile>
                                </configuration>
                            </execution>
                            <execution>
                                <id>clean-stale-0.9-zh-doc</id>
                                <phase>compile</phase>
                                <goals>
                                    <goal>rename</goal>
                                </goals>
                                <configuration>
                                    <sourceFile>${project.build.directory}/existing/zh/UserGuide/V0.9.x</sourceFile>
                                    <destinationFile>${project.build.directory}/existing/zh/V0.9.x</destinationFile>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>compile-site-0.8</id>
            <build>
                <plugins>
                    <!-- download 0.8 docs from iotdb repo -->
                    <plugin>
                        <groupId>com.googlecode.maven-download-plugin</groupId>
                        <artifactId>download-maven-plugin</artifactId>
                        <version>1.3.0</version>
                        <executions>
                            <execution>
                                <id>get-0.8-docs</id>
                                <phase>generate-sources</phase>
                                <goals>
                                    <goal>wget</goal>
                                </goals>
                                <configuration>
                                    <url>https://github.com/apache/iotdb/archive/rel/0.8.zip</url>
                                    <outputDirectory>${project.build.directory}/download</outputDirectory>
                                    <outputFileName>0.8.x.zip</outputFileName>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <!-- unpack 0.8 docs from the zip files-->
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>truezip-maven-plugin</artifactId>
                        <version>1.2</version>
                        <inherited>false</inherited>
                        <executions>
                            <execution>
                                <id>copy-0.8-documentation</id>
                                <goals>
                                    <goal>copy</goal>
                                </goals>
                                <phase>generate-sources</phase>
                                <configuration>
                                    <fileset>
                                        <directory>${project.build.directory}/download/0.8.x.zip/iotdb-rel-0.8/docs/UserGuide</directory>
                                        <outputDirectory>${project.build.directory}/vue-source/src/UserGuide/V0.8.x</outputDirectory>
                                    </fileset>
                                </configuration>
                            </execution>
                            <execution>
                                <id>copy-0.8-zh-documentation</id>
                                <goals>
                                    <goal>copy</goal>
                                </goals>
                                <phase>generate-sources</phase>
                                <configuration>
                                    <fileset>
                                        <directory>${project.build.directory}/download/0.8.x.zip/iotdb-rel-0.8/docs/zh/UserGuide</directory>
                                        <outputDirectory>${project.build.directory}/vue-source/src/zh/UserGuide/V0.8.x</outputDirectory>
                                    </fileset>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <!-- remove files if `existing` folder exist-->
                    <plugin>
                        <groupId>com.coderplus.maven.plugins</groupId>
                        <artifactId>copy-rename-maven-plugin</artifactId>
                        <version>1.0</version>
                        <executions>
                            <execution>
                                <id>clean-stale-0.8-doc</id>
                                <phase>compile</phase>
                                <goals>
                                    <goal>rename</goal>
                                </goals>
                                <configuration>
                                    <sourceFile>${project.build.directory}/existing/UserGuide/V0.8.x</sourceFile>
                                    <destinationFile>${project.build.directory}/existing/V0.8.x</destinationFile>
                                </configuration>
                            </execution>
                            <execution>
                                <id>clean-stale-0.8-zh-doc</id>
                                <phase>compile</phase>
                                <goals>
                                    <goal>rename</goal>
                                </goals>
                                <configuration>
                                    <sourceFile>${project.build.directory}/existing/zh/UserGuide/V0.8.x</sourceFile>
                                    <destinationFile>${project.build.directory}/existing/zh/V0.8.x</destinationFile>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>
</project>
